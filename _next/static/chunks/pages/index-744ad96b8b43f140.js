(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9639)}])},9639:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSG:function(){return H},default:function(){return J}});var r=n(5893),o=n(7294),a=n(2293),i=n(5113),l=n(155),c=n(3946),u=n(326),s=n(2224),f=n(6583),d=n(5861),h=n(6886),p="22.5.2902",g=n(1633),m=n.n(g),y=n(4051),x=n.n(y),b=n(6887),v={500:["#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688"],200:["#a5d6a7","#c5e1a5","#e6ee9c","#fff59d","#ffe082","#ffcc80","#ffab91","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#9fa8da","#90caf9","#81d4fa","80deea","#80cbc4"]},j={800:["#2e7d32","#558b2f","#9e9d24","#f9a825","#ff8f00","#ef6c00","#d84315","#c62828","#ad1457","#6a1b9a","#4527a0","#283593","#1565c0","#0277bd","#00838f","#00695c"]},w=n(8100),S=n(6230),Z=n.n(S);function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k(t,e,n,r,o,a,i){try{var l=t[a](i),c=l.value}catch(u){return void n(u)}l.done?e(c):Promise.resolve(c).then(r,o)}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(c){l=!0,o=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=function(t){var e=t.month,n=t.year,a=(0,w.D3)().getAccessTokenSilently,i=_(o.useState([["From","To","kr",{type:"string",role:"tooltip"}],["A","B",10,"foo"]]),2),l=i[0],c=i[1];o.useEffect((function(){var t;(t=x().mark((function t(){var r,o,i,l,u;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("use effect called:",e,n),t.prev=1,t.next=4,a({audience:"https://api.malt.no/budget",scope:"read:streams"});case 4:return r=t.sent,o="".concat("https://api.malt.no","/budget/streams/").concat(n,"/").concat(parseInt(e)+1),t.next=8,fetch(o,{headers:{Authorization:"Bearer ".concat(r)}});case 8:return i=t.sent,t.next=11,i.json();case 11:l=t.sent,u=[["From","To","Kr ",{type:"string",role:"tooltip"}]],l.values.forEach((function(t){u.push([t[0],t[1],t[2],'<div style="white-space: nowrap; padding: 8px;"><strong>'.concat(t[1],"</strong><br/>kr ").concat(t[2].toFixed(2),"</div>")])})),console.log(u),c(u),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),console.error(t.t0);case 21:case"end":return t.stop()}}),t,null,[[1,18]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){k(a,r,o,i,l,"next",t)}function l(t){k(a,r,o,i,l,"throw",t)}i(void 0)}))})()}),[e,n,a]);var u=new Date(parseInt(n),parseInt(e),12);return(0,r.jsxs)("div",{id:"budget-sankey-section",className:Z().graph,children:[(0,r.jsx)(d.Z,{variant:"h5",className:Z().titleh5,children:u.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,r.jsx)(b.ZP,{chartType:"Sankey",width:"calc(100vw - 32px)",height:"calc((100vw * (9/16)) - 88px)",style:{minHeight:"288px"},options:{sankey:{iterations:256,link:{colors:v[200],colorMode:"gradient"},node:{colors:j[800],width:40,label:{color:"#444",fontName:"Roboto",fontSize:12}}},tooltip:{isHtml:!0,textStyle:{fontSize:12}}},data:l})]})},I=n(4054),M=n(3841),P=n(4917);function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(c){l=!0,o=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(t){var e=t.onYearChange,n=t.onMonthChange,a=t.years,i=new Date,l="January February March April May June July August September October November December".split(" ").map((function(t,e){return[t,e]})),c=function(t,e){return t.filter((function(t){return e<i.getFullYear()||t[1]<=i.getMonth()}))},u=z(o.useState(i.getFullYear().toString()),2),f=u[0],d=u[1],p=z(o.useState(c(l,parseInt(f,10))),2),g=p[0],m=p[1],y=z(o.useState(i.getMonth().toString()),2),x=y[0],b=y[1];return(0,r.jsxs)(h.ZP,{container:!0,spacing:2,direction:"row",justifyContent:"flex-start",children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,sx:{minWidth:"288px",maxWidth:"343px"},children:(0,r.jsxs)(I.Z,{variant:"standard",sx:{width:"100%"},children:[(0,r.jsx)(M.Z,{id:"budget-year-label",children:"Year"}),(0,r.jsx)(P.Z,{labelId:"budget-year-label",id:"budget-year-select",value:f,onChange:function(t){d(t.target.value),m(c(l,parseInt(t.target.value))),"function"===typeof e&&e(t.target.value)},children:a.map((function(t){return(0,r.jsx)(s.Z,{value:t,children:t},t)}))})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,sx:{minWidth:"288px",maxWidth:"343px"},children:(0,r.jsxs)(I.Z,{variant:"standard",sx:{width:"100%"},children:[(0,r.jsx)(M.Z,{id:"budget-month-label",children:"Month"}),(0,r.jsx)(P.Z,{labelId:"budget-month-label",id:"budget-month-select",value:x,onChange:function(t){b(t.target.value),"function"===typeof n&&n(t.target.value)},children:g.map((function(t){return(0,r.jsx)(s.Z,{value:t[1],children:t[0]},t[0])}))})]})})]})},E=n(3321),O=n(9661),F=n(7720),U=n(8885),Y=n(7357),D=n(9029),W=n(8102);function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(c){l=!0,o=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=!0,J=function(t){var e=t.years,n=new Date,g=(0,w.D3)(),y=g.loginWithRedirect,x=g.logout,b=g.isAuthenticated,v=g.user,j=L(o.useState(null),2),S=j[0],Z=j[1],A=L(o.useState(n.getFullYear().toString()),2),k=A[0],_=A[1],I=L(o.useState(n.getMonth().toString()),2),M=I[0],P=I[1],T=function(t){return Z(t.currentTarget)},z=function(){return Z(null)},B=function(){b?x({returnTo:"https://budget.malt.no",client_id:"BoqWrpecEONM0NjjSTYjTWKcUa74kI7h"}):y({connection:"google-oauth2"})};return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(a.Z,{position:"static",elevation:1,children:(0,r.jsxs)(l.Z,{variant:"regular",children:[(0,r.jsx)(c.Z,{edge:"start",className:m().menuButton,size:"large",color:"inherit","aria-label":"menu",sx:{mr:2},children:(0,r.jsx)(u.Z,{})}),(0,r.jsx)(d.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"budget.malt.no"}),(0,r.jsx)(E.Z,{color:"inherit",onClick:B,children:b?"Logout":"Login"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(O.Z,{onClick:T,color:"inherit",src:"undefined"===typeof v?"":v.picture,alt:"undefined"===typeof v?"Unauthorized user":v.name,sx:{border:"3.5px solid white"}}),(0,r.jsxs)(f.Z,{anchorEl:S,open:Boolean(S),onClose:z,onClick:z,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(O.Z,{onClick:T,color:"inherit",src:"undefined"===typeof v?"":v.picture,alt:"undefined"===typeof v?"Unauthorized user":v.name,sx:{border:"3.5px solid white"}})," ","undefined"===typeof v?"Unauthorized user":v.name]}),(0,r.jsx)(F.Z,{}),(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(U.Z,{children:(0,r.jsx)(D.Z,{fontSize:"small"})}),"Logout"]})]})]})]})}),(0,r.jsxs)(h.ZP,{container:!0,spacing:3,direction:"column",children:[(0,r.jsx)(h.ZP,{item:!0,xs:12,margin:2,children:(0,r.jsx)(i.Z,{sx:{padding:0,width:"auto",minHeight:"320px"},elevation:0,children:b&&(0,r.jsx)(C,{month:M,year:k})})}),(0,r.jsx)(h.ZP,{item:!0,xs:12,marginLeft:2,children:(0,r.jsx)(N,{years:e,onYearChange:function(t){return _(t)},onMonthChange:function(t){return P(t)}})}),(0,r.jsx)(h.ZP,{item:!0,xs:12,margin:0,children:(0,r.jsx)(Y.Z,{padding:1,marginTop:2,sx:{backgroundColor:W.r.palette.grey[100]},children:(0,r.jsxs)(d.Z,{variant:"caption",children:["budget sankey - initial version - v",p]})})})]})]})}},6230:function(t){t.exports={graph:"BudgetSankey_graph__Fzyg5"}},1633:function(t){t.exports={footer:"Home_footer__zed0_"}}},function(t){t.O(0,[280,774,888,179],(function(){return e=8312,t(t.s=e);var e}));var e=t.O();_N_E=e}]);