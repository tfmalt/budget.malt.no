(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{5736:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sankey",function(){return n(6494)}])},7592:function(e,t,n){"use strict";n.d(t,{f:function(){return g}});var a=n(7568),r=n(603),c=n(4051),o=n.n(c),i=n(5893),s=n(7294),f=n(6887),u=n(8396),d=n(7357),l=n(5861),h={500:["#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688"],200:["#a5d6a7","#c5e1a5","#e6ee9c","#fff59d","#ffe082","#ffcc80","#ffab91","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#9fa8da","#90caf9","#81d4fa","80deea","#80cbc4"]},p={800:["#2e7d32","#558b2f","#9e9d24","#f9a825","#ff8f00","#ef6c00","#d84315","#c62828","#ad1457","#6a1b9a","#4527a0","#283593","#1565c0","#0277bd","#00838f","#00695c"]},m=n(8100),g=function(e){var t=e.month,n=e.year,c=e.width,g=e.height,b=e.maxWidth,x=e.maxHeight,v=e.update,w=(0,m.D3)().getAccessTokenSilently,S=((0,u.Z)("(min-width:600px)"),(0,r.Z)(s.useState([["From","To","kr",{type:"string",role:"tooltip"}],["A","B",10,"foo"]]),2)),y=S[0],k=S[1],Z=(0,r.Z)(s.useState(new Date(0)),2),_=Z[0],N=Z[1];s.useEffect((function(){(0,a.Z)(o().mark((function e(){var a,r,c,i,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,console.log("use effect called:",t,n,a.toJSON()),e.prev=2,e.next=5,w({audience:"https://api.malt.no/budget",scope:"read:streams"});case 5:return r=e.sent,c="".concat("https://api.malt.no","/budget/streams/").concat(n,"/").concat(parseInt(t)+1),e.next=9,fetch(c,{headers:{Authorization:"Bearer ".concat(r)}});case 9:return i=e.sent,e.next=12,i.json();case 12:s=e.sent,N(new Date(s.timestamp)),f=[["From","To","Kr ",{type:"string",role:"tooltip"}]],s.values.forEach((function(e){f.push([e[0],e[1],e[2],'<div style="white-space: nowrap; padding: 8px;"><strong>'.concat(e[1],"</strong><br/>kr ").concat(e[2].toFixed(2),"</div>")])})),k(f),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})))()}),[t,n,v,w]);var j=new Date(parseInt(n),parseInt(t),12);return(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(l.Z,{variant:"h5",children:j.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,i.jsxs)(l.Z,{variant:"caption",children:["Sist oppdatert:"," ",_.toLocaleString("no-NO",{month:"long",year:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})]}),(0,i.jsx)(f.ZP,{chartType:"Sankey",style:{width:c||400,height:g||400,maxWidth:b||"100%",maxHeight:x||"calc(100vw - 128px)"},options:{sankey:{iterations:256,link:{colors:h[200],colorMode:"gradient"},node:{colors:p[800],width:40,label:{color:"#444",fontName:"Roboto",fontSize:12}}},tooltip:{isHtml:!0,textStyle:{fontSize:12}}},data:y})]})}},6494:function(e,t,n){"use strict";n.r(t);var a=n(603),r=n(5893),c=n(3156),o=n(7357),i=n(7294),s=n(7592);t.default=function(){var e=new Date,t=(0,a.Z)(i.useState(e.getFullYear().toString()),2),n=t[0],f=(t[1],(0,a.Z)(i.useState(e.getMonth().toString()),2)),u=f[0],d=(f[1],(0,a.Z)(i.useState(e.toJSON()),2)),l=d[0],h=d[1];return i.useEffect((function(){var e=setInterval((function(){h((function(){return(new Date).toJSON()}))}),36e5);return function(){return clearInterval(e)}}),[]),(0,r.jsx)(c.Z,{disableGutters:!0,children:(0,r.jsx)(o.Z,{padding:2,children:(0,r.jsx)(s.f,{month:u,year:n,width:"100vw",maxHeight:"calc(100vh - 100px)",height:"calc(100vh - 100px)",update:l})})})}}},function(e){e.O(0,[545,774,888,179],(function(){return t=5736,e(e.s=t);var t}));var t=e.O();_N_E=t}]);