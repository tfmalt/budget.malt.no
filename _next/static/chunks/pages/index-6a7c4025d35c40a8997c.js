(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9442:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return W},default:function(){return B}});var r=n(6311),a=n(7294),o=n(3720),i=n(6501),s=n(4386),c=n(6867),l=n(326),d=n(8748),u=n(1871),h=n(2658),f=n(558),g="21.9.2508",p=n(9954),x=n.n(p),m=n(266),b=n(809),v=n.n(b),j=n(7385),Z={500:["#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688"],200:["#a5d6a7","#c5e1a5","#e6ee9c","#fff59d","#ffe082","#ffcc80","#ffab91","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#9fa8da","#90caf9","#81d4fa","80deea","#80cbc4"]},y={800:["#2e7d32","#558b2f","#9e9d24","#f9a825","#ff8f00","#ef6c00","#d84315","#c62828","#ad1457","#6a1b9a","#4527a0","#283593","#1565c0","#0277bd","#00838f","#00695c"]},w=n(8100),S=n(5588),k=n.n(S),_=n(5893),C=function(e){var t=e.month,n=e.year,o=(0,w.D3)().getAccessTokenSilently,i=a.useState([["From","To","kr",{type:"string",role:"tooltip"}],["A","B",10,"foo"]]),s=(0,r.Z)(i,2),c=s[0],l=s[1];a.useEffect((function(){(0,m.Z)(v().mark((function e(){var r,a,i,s,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("use effect called:",t,n),e.prev=1,e.next=4,o({audience:"https://api.malt.no/budget",scope:"read:streams"});case 4:return r=e.sent,a="".concat("https://api.malt.no","/budget/streams/").concat(n,"/").concat(parseInt(t)+1),e.next=8,fetch(a,{headers:{Authorization:"Bearer ".concat(r)}});case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,c=[["From","To","Kr ",{type:"string",role:"tooltip"}]],s.values.forEach((function(e){c.push([e[0],e[1],e[2],'<div style="white-space: nowrap; padding: 8px;"><strong>'.concat(e[1],"</strong><br/>kr ").concat(e[2].toFixed(2),"</div>")])})),console.log(c),l(c),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))()}),[t,n,o]);var d=new Date(parseInt(n),parseInt(t),12);return(0,_.jsxs)("div",{id:"budget-sankey-section",className:k().graph,children:[(0,_.jsx)(h.Z,{variant:"h5",className:k().titleh5,children:d.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,_.jsx)(j.Z,{chartType:"Sankey",width:"calc(100vw - 32px)",height:"calc((100vw * (9/16)) - 88px)",style:{minHeight:"288px"},options:{sankey:{iterations:256,link:{colors:Z[200],colorMode:"gradient"},node:{colors:y[800],width:40,label:{color:"#444",fontName:"Roboto",fontSize:12}}},tooltip:{isHtml:!0,textStyle:{fontSize:12}}},data:c})]})},N=n(6446),z=n(7666),M=n(1037),P=function(e){var t=e.onYearChange,n=e.onMonthChange,o=e.years,i=new Date,s="January February March April May June July August September October November December".split(" ").map((function(e,t){return[e,t]})),c=function(e,t){return e.filter((function(e){return t<i.getFullYear()||e[1]<=i.getMonth()}))},l=a.useState(i.getFullYear().toString()),u=(0,r.Z)(l,2),h=u[0],g=u[1],p=a.useState(c(s,parseInt(h,10))),x=(0,r.Z)(p,2),m=x[0],b=x[1],v=a.useState(i.getMonth().toString()),j=(0,r.Z)(v,2),Z=j[0],y=j[1];return(0,_.jsxs)(f.ZP,{container:!0,spacing:2,direction:"row",justifyContent:"flex-start",children:[(0,_.jsx)(f.ZP,{item:!0,xs:6,sm:3,md:2,sx:{minWidth:"288px",maxWidth:"343px"},children:(0,_.jsxs)(N.Z,{variant:"standard",sx:{width:"100%"},children:[(0,_.jsx)(z.Z,{id:"budget-year-label",children:"Year"}),(0,_.jsx)(M.Z,{labelId:"budget-year-label",id:"budget-year-select",value:h,onChange:function(e){g(e.target.value),b(c(s,parseInt(e.target.value))),"function"===typeof t&&t(e.target.value)},children:o.map((function(e){return(0,_.jsx)(d.Z,{value:e,children:e},e)}))})]})}),(0,_.jsx)(f.ZP,{item:!0,xs:6,sm:3,md:2,sx:{minWidth:"288px",maxWidth:"343px"},children:(0,_.jsxs)(N.Z,{variant:"standard",sx:{width:"100%"},children:[(0,_.jsx)(z.Z,{id:"budget-month-label",children:"Month"}),(0,_.jsx)(M.Z,{labelId:"budget-month-label",id:"budget-month-select",value:Z,onChange:function(e){y(e.target.value),"function"===typeof n&&n(e.target.value)},children:m.map((function(e){return(0,_.jsx)(d.Z,{value:e[1],children:e[0]},e[0])}))})]})})]})},T=n(2642),E=n(7109),I=n(7720),F=n(8885),Y=n(1508),A=n(9029),D=n(454),W=!0,B=function(e){var t=e.years,n=new Date,p=(0,w.D3)(),m=p.loginWithRedirect,b=p.logout,v=p.isAuthenticated,j=p.user,Z=a.useState(null),y=(0,r.Z)(Z,2),S=y[0],k=y[1],N=a.useState(n.getFullYear().toString()),z=(0,r.Z)(N,2),M=z[0],W=z[1],B=a.useState(n.getMonth().toString()),O=(0,r.Z)(B,2),L=O[0],U=O[1],H=function(e){return k(e.currentTarget)},J=function(){return k(null)},q=function(){v?b({returnTo:"https://budget.malt.no",client_id:"BoqWrpecEONM0NjjSTYjTWKcUa74kI7h"}):m({connection:"google-oauth2"})};return(0,_.jsxs)(a.Fragment,{children:[(0,_.jsx)(o.Z,{position:"static",elevation:1,children:(0,_.jsxs)(s.Z,{variant:"regular",children:[(0,_.jsx)(c.Z,{edge:"start",className:x().menuButton,size:"large",color:"inherit","aria-label":"menu",sx:{mr:2},children:(0,_.jsx)(l.Z,{})}),(0,_.jsx)(h.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"budget.malt.no"}),(0,_.jsx)(T.Z,{color:"inherit",onClick:q,children:v?"Logout":"Login"}),(0,_.jsxs)("div",{children:[(0,_.jsx)(E.Z,{onClick:H,color:"inherit",src:"undefined"===typeof j?"":j.picture,alt:"undefined"===typeof j?"Unauthorized user":j.name,sx:{border:"3.5px solid white"}}),(0,_.jsxs)(u.Z,{anchorEl:S,open:Boolean(S),onClose:J,onClick:J,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,_.jsxs)(d.Z,{children:[(0,_.jsx)(E.Z,{onClick:H,color:"inherit",src:"undefined"===typeof j?"":j.picture,alt:"undefined"===typeof j?"Unauthorized user":j.name,sx:{border:"3.5px solid white"}})," ","undefined"===typeof j?"Unauthorized user":j.name]}),(0,_.jsx)(I.Z,{}),(0,_.jsxs)(d.Z,{children:[(0,_.jsx)(F.Z,{children:(0,_.jsx)(A.Z,{fontSize:"small"})}),"Logout"]})]})]})]})}),(0,_.jsxs)(f.ZP,{container:!0,spacing:3,direction:"column",children:[(0,_.jsx)(f.ZP,{item:!0,xs:12,margin:2,children:(0,_.jsx)(i.Z,{sx:{padding:0,width:"auto",minHeight:"320px"},elevation:0,children:v&&(0,_.jsx)(C,{month:L,year:M})})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,marginLeft:2,children:(0,_.jsx)(P,{years:t,onYearChange:function(e){return W(e)},onMonthChange:function(e){return U(e)}})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,margin:0,children:(0,_.jsx)(Y.Z,{padding:1,marginTop:2,sx:{backgroundColor:D.r.palette.grey[100]},children:(0,_.jsxs)(h.Z,{variant:"caption",children:["budget sankey - initial version - v",g]})})})]})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9442)}])},5588:function(e){e.exports={graph:"BudgetSankey_graph__Zs1qg"}},9954:function(e){e.exports={footer:"Home_footer__2v49s"}}},function(e){e.O(0,[704,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);